{% load server_tags %}

<div>
    <div style="background: #5bbad5; color: #ffffff; text-align: center; padding: 0.5em">
    Preview
    </div>
</div>


<div class="post-body {{ post.get_status_display }} clearfix">

    <div class="title" >{{ post.get_type_display }}: <span itemprop="name">{{ post.title }}</span></div>


    <div class="post vote-box visible-lg visible-md" >
        <div class="vote mark tip" data-toggle="tooltip" data-placement="top"
             data-type="vote" title="Upvote!">
            <i class="fa fa-thumbs-o-up fa-2x"></i></div>

        <div class="count" itemprop="voteCount">0</div>

        <div class="vote mark tip" data-toggle="tooltip" data-placement="top"
             data-type="bookmark" title="Bookmark!">
            <i class="fa fa-book fa-2x"></i>
        </div>

    </div>

    <div>
        <a name="{{ post.id }}"></a>
        {# The body of the post #}
        <div class="content" >

            <div class="col-xs-3 col-md-2 box pull-right text-center visible-lg visible-md">
                    <div>Avatar not yet known</div>
                    <div class="ago">{{ post.date|time_ago }} by</div>
                    <div class="uname">Pen name not yet known</div>
            </div>

            <div class="box text-center visible-sm visible-xs">
                <div class="uname">Pen name not yet known:</div>
            </div>

            <span itemprop="text">{{ post.html|safe }}</span>

            <div class="clearfix">
                {% if post.is_toplevel %}
                    <div class="tags clearfix" style="margin-bottom:0.5em;">
                        {% for tag in post.tag_value %}
                            <span class="tag">{{ tag }}</span>
                        {% endfor %}
                        &bull;
                        0 views
                    </div>
                {% endif %}

                <a href="{{ edit_url|safe }}">edit</a>
            </div>

        </div>

    </div>

</div>



<h1>Next step</h1>
<div>Now it's time to review and publish your question. Click edit to make changes before publishing. The post will be published after a payment is made on the Lightning Network using the invoice. Payment of <b>300 sat</b> is required.</div>

<h4>What happens when I publish this post?</h4>
<div>The following information is going to be associated with the post and made publicly visible.</div>
<ul>
    <li>Your wallet's <b>pubkey</b></li>
    <li>A "pen name" base on the pubkey</li>
    <li>An avatar image base on the pubkey</li>
    <li>Statistics such as number of posts, up-votes, and reputation score</li>
</ul>

<h4>What if I want to save draft and resume later?</h4>
<div>To save current work and continue later, then <b>bookmark this page</b>.


<h1>Regarding privacy</h1>

<div>First, please read our short <nobr><a href="{% url 'flatpage' 'policy' %}">User Agreement and Privacy Policy</a></nobr>.</div>

<div style="margin-top: 1em">This website does not set cookies. You can also hide your IP address from us by using a VPN service. The website gets information from you only via <b>URLs</b> (links) and <b>invoices</b> (requests of payments on the Lightning Network). Payments of invoices are required for all actions on the website such as posting, commenting, and upvoting.</div>

<h4>What information is saved in the URL and invoice?</h4>
The URL of this page encodes the work in-progress. The URL encodes only what's visible on this page. Specifically, the content of the post and timestamp. It does not contain your wallet's pubkey, IP address, or any other data about the person or people involved in writing the post. A part of this URL is going to be
included in the invoice which when payed publishes the post.</div>

<h4>How can I know what you're saying about the URL and invoice is true?</h4>
<div>You can decode the URL with python3 like so</div>
<code>
echo PUT_URL_HERE | python3 -c 'import zlib, binascii, urllib.parse, sys; urllib; url = sys.stdin.readline(); memo = urllib.parse.unquote(url.split("/", 6)[6].rstrip("/")); decoded = zlib.decompress(binascii.a2b_base64(memo)).decode("utf-8"); print(decoded)'   | python3 -m json.tool
</code>


<div style="margin-top: 1em">... and decode the payment invoice with Lightning CLI like so</div>
<code>
lncli decodepayreq PUT_INVOICE_HERE
</code>

